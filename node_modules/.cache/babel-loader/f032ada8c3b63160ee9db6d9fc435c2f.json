{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\n\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nvar _ContractManager_contractNetworks, _ContractManager_isL1SafeMasterCopy, _ContractManager_safeContract, _ContractManager_multiSendContract, _ContractManager_multiSendCallOnlyContract;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar config_1 = require(\"../contracts/config\");\n\nvar safeDeploymentContracts_1 = require(\"../contracts/safeDeploymentContracts\");\n\nvar ContractManager = /*#__PURE__*/function () {\n  function ContractManager() {\n    _classCallCheck(this, ContractManager);\n\n    _ContractManager_contractNetworks.set(this, void 0);\n\n    _ContractManager_isL1SafeMasterCopy.set(this, void 0);\n\n    _ContractManager_safeContract.set(this, void 0);\n\n    _ContractManager_multiSendContract.set(this, void 0);\n\n    _ContractManager_multiSendCallOnlyContract.set(this, void 0);\n  }\n\n  _createClass(ContractManager, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var ethAdapter, safeAddress, isL1SafeMasterCopy, contractNetworks, chainId, customContracts, temporarySafeContract, safeVersion;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                ethAdapter = _ref.ethAdapter, safeAddress = _ref.safeAddress, isL1SafeMasterCopy = _ref.isL1SafeMasterCopy, contractNetworks = _ref.contractNetworks;\n                _context.next = 3;\n                return ethAdapter.getChainId();\n\n              case 3:\n                chainId = _context.sent;\n                customContracts = contractNetworks === null || contractNetworks === void 0 ? void 0 : contractNetworks[chainId];\n\n                __classPrivateFieldSet(this, _ContractManager_contractNetworks, contractNetworks, \"f\");\n\n                __classPrivateFieldSet(this, _ContractManager_isL1SafeMasterCopy, isL1SafeMasterCopy, \"f\");\n\n                _context.next = 9;\n                return (0, safeDeploymentContracts_1.getSafeContract)({\n                  ethAdapter: ethAdapter,\n                  safeVersion: config_1.SAFE_LAST_VERSION,\n                  chainId: chainId,\n                  isL1SafeMasterCopy: isL1SafeMasterCopy,\n                  customSafeAddress: safeAddress,\n                  customContracts: customContracts\n                });\n\n              case 9:\n                temporarySafeContract = _context.sent;\n                _context.next = 12;\n                return temporarySafeContract.getVersion();\n\n              case 12:\n                safeVersion = _context.sent;\n                _context.t0 = __classPrivateFieldSet;\n                _context.t1 = this;\n                _context.t2 = _ContractManager_safeContract;\n                _context.next = 18;\n                return (0, safeDeploymentContracts_1.getSafeContract)({\n                  ethAdapter: ethAdapter,\n                  safeVersion: safeVersion,\n                  chainId: chainId,\n                  isL1SafeMasterCopy: isL1SafeMasterCopy,\n                  customSafeAddress: safeAddress,\n                  customContracts: customContracts\n                });\n\n              case 18:\n                _context.t3 = _context.sent;\n                (0, _context.t0)(_context.t1, _context.t2, _context.t3, \"f\");\n                _context.t4 = __classPrivateFieldSet;\n                _context.t5 = this;\n                _context.t6 = _ContractManager_multiSendContract;\n                _context.next = 25;\n                return (0, safeDeploymentContracts_1.getMultiSendContract)({\n                  ethAdapter: ethAdapter,\n                  safeVersion: safeVersion,\n                  chainId: chainId,\n                  customContracts: customContracts\n                });\n\n              case 25:\n                _context.t7 = _context.sent;\n                (0, _context.t4)(_context.t5, _context.t6, _context.t7, \"f\");\n                _context.t8 = __classPrivateFieldSet;\n                _context.t9 = this;\n                _context.t10 = _ContractManager_multiSendCallOnlyContract;\n                _context.next = 32;\n                return (0, safeDeploymentContracts_1.getMultiSendCallOnlyContract)({\n                  ethAdapter: ethAdapter,\n                  safeVersion: safeVersion,\n                  chainId: chainId,\n                  customContracts: customContracts\n                });\n\n              case 32:\n                _context.t11 = _context.sent;\n                (0, _context.t8)(_context.t9, _context.t10, _context.t11, \"f\");\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"contractNetworks\",\n    get: function get() {\n      return __classPrivateFieldGet(this, _ContractManager_contractNetworks, \"f\");\n    }\n  }, {\n    key: \"isL1SafeMasterCopy\",\n    get: function get() {\n      return __classPrivateFieldGet(this, _ContractManager_isL1SafeMasterCopy, \"f\");\n    }\n  }, {\n    key: \"safeContract\",\n    get: function get() {\n      return __classPrivateFieldGet(this, _ContractManager_safeContract, \"f\");\n    }\n  }, {\n    key: \"multiSendContract\",\n    get: function get() {\n      return __classPrivateFieldGet(this, _ContractManager_multiSendContract, \"f\");\n    }\n  }, {\n    key: \"multiSendCallOnlyContract\",\n    get: function get() {\n      return __classPrivateFieldGet(this, _ContractManager_multiSendCallOnlyContract, \"f\");\n    }\n  }], [{\n    key: \"create\",\n    value: function () {\n      var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n        var ethAdapter, safeAddress, isL1SafeMasterCopy, contractNetworks, contractManager;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                ethAdapter = _ref2.ethAdapter, safeAddress = _ref2.safeAddress, isL1SafeMasterCopy = _ref2.isL1SafeMasterCopy, contractNetworks = _ref2.contractNetworks;\n                contractManager = new ContractManager();\n                _context2.next = 4;\n                return contractManager.init({\n                  ethAdapter: ethAdapter,\n                  safeAddress: safeAddress,\n                  isL1SafeMasterCopy: isL1SafeMasterCopy,\n                  contractNetworks: contractNetworks\n                });\n\n              case 4:\n                return _context2.abrupt(\"return\", contractManager);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function create(_x2) {\n        return _create.apply(this, arguments);\n      }\n\n      return create;\n    }()\n  }]);\n\n  return ContractManager;\n}();\n\n_ContractManager_contractNetworks = new WeakMap(), _ContractManager_isL1SafeMasterCopy = new WeakMap(), _ContractManager_safeContract = new WeakMap(), _ContractManager_multiSendContract = new WeakMap(), _ContractManager_multiSendCallOnlyContract = new WeakMap();\nexports.default = ContractManager;","map":{"version":3,"sources":["../../../src/managers/contractManager.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ContractManager_contractNetworks, _ContractManager_isL1SafeMasterCopy, _ContractManager_safeContract, _ContractManager_multiSendContract, _ContractManager_multiSendCallOnlyContract;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = require(\"../contracts/config\");\nconst safeDeploymentContracts_1 = require(\"../contracts/safeDeploymentContracts\");\nclass ContractManager {\n    constructor() {\n        _ContractManager_contractNetworks.set(this, void 0);\n        _ContractManager_isL1SafeMasterCopy.set(this, void 0);\n        _ContractManager_safeContract.set(this, void 0);\n        _ContractManager_multiSendContract.set(this, void 0);\n        _ContractManager_multiSendCallOnlyContract.set(this, void 0);\n    }\n    static async create({ ethAdapter, safeAddress, isL1SafeMasterCopy, contractNetworks }) {\n        const contractManager = new ContractManager();\n        await contractManager.init({ ethAdapter, safeAddress, isL1SafeMasterCopy, contractNetworks });\n        return contractManager;\n    }\n    async init({ ethAdapter, safeAddress, isL1SafeMasterCopy, contractNetworks }) {\n        const chainId = await ethAdapter.getChainId();\n        const customContracts = contractNetworks === null || contractNetworks === void 0 ? void 0 : contractNetworks[chainId];\n        __classPrivateFieldSet(this, _ContractManager_contractNetworks, contractNetworks, \"f\");\n        __classPrivateFieldSet(this, _ContractManager_isL1SafeMasterCopy, isL1SafeMasterCopy, \"f\");\n        const temporarySafeContract = await (0, safeDeploymentContracts_1.getSafeContract)({\n            ethAdapter,\n            safeVersion: config_1.SAFE_LAST_VERSION,\n            chainId,\n            isL1SafeMasterCopy,\n            customSafeAddress: safeAddress,\n            customContracts\n        });\n        const safeVersion = await temporarySafeContract.getVersion();\n        __classPrivateFieldSet(this, _ContractManager_safeContract, await (0, safeDeploymentContracts_1.getSafeContract)({\n            ethAdapter,\n            safeVersion,\n            chainId,\n            isL1SafeMasterCopy,\n            customSafeAddress: safeAddress,\n            customContracts\n        }), \"f\");\n        __classPrivateFieldSet(this, _ContractManager_multiSendContract, await (0, safeDeploymentContracts_1.getMultiSendContract)({\n            ethAdapter,\n            safeVersion,\n            chainId,\n            customContracts\n        }), \"f\");\n        __classPrivateFieldSet(this, _ContractManager_multiSendCallOnlyContract, await (0, safeDeploymentContracts_1.getMultiSendCallOnlyContract)({\n            ethAdapter,\n            safeVersion,\n            chainId,\n            customContracts\n        }), \"f\");\n    }\n    get contractNetworks() {\n        return __classPrivateFieldGet(this, _ContractManager_contractNetworks, \"f\");\n    }\n    get isL1SafeMasterCopy() {\n        return __classPrivateFieldGet(this, _ContractManager_isL1SafeMasterCopy, \"f\");\n    }\n    get safeContract() {\n        return __classPrivateFieldGet(this, _ContractManager_safeContract, \"f\");\n    }\n    get multiSendContract() {\n        return __classPrivateFieldGet(this, _ContractManager_multiSendContract, \"f\");\n    }\n    get multiSendCallOnlyContract() {\n        return __classPrivateFieldGet(this, _ContractManager_multiSendCallOnlyContract, \"f\");\n    }\n}\n_ContractManager_contractNetworks = new WeakMap(), _ContractManager_isL1SafeMasterCopy = new WeakMap(), _ContractManager_safeContract = new WeakMap(), _ContractManager_multiSendContract = new WeakMap(), _ContractManager_multiSendCallOnlyContract = new WeakMap();\nexports.default = ContractManager;\n//# sourceMappingURL=contractManager.js.map"]},"metadata":{},"sourceType":"script"}