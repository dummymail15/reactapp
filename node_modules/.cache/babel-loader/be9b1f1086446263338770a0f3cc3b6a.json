{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _objectSpread = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _regeneratorRuntime = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/ravi/coinflip/coin-flip-test-main/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar bignumber_1 = require(\"@ethersproject/bignumber\");\n\nvar GnosisSafeProxyFactoryEthersContract = /*#__PURE__*/function () {\n  function GnosisSafeProxyFactoryEthersContract(contract) {\n    _classCallCheck(this, GnosisSafeProxyFactoryEthersContract);\n\n    this.contract = contract;\n  }\n\n  _createClass(GnosisSafeProxyFactoryEthersContract, [{\n    key: \"getAddress\",\n    value: function getAddress() {\n      return this.contract.address;\n    }\n  }, {\n    key: \"proxyCreationCode\",\n    value: function () {\n      var _proxyCreationCode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.contract.proxyCreationCode());\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function proxyCreationCode() {\n        return _proxyCreationCode.apply(this, arguments);\n      }\n\n      return proxyCreationCode;\n    }()\n  }, {\n    key: \"createProxy\",\n    value: function () {\n      var _createProxy = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref) {\n        var safeMasterCopyAddress, initializer, saltNonce, options, callback, proxyAddress;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                safeMasterCopyAddress = _ref.safeMasterCopyAddress, initializer = _ref.initializer, saltNonce = _ref.saltNonce, options = _ref.options, callback = _ref.callback;\n\n                if (!bignumber_1.BigNumber.from(saltNonce).lt(0)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new Error('saltNonce must be greater than or equal to 0');\n\n              case 3:\n                if (!(options && !options.gasLimit)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                _context3.next = 6;\n                return this.estimateGas('createProxyWithNonce', [safeMasterCopyAddress, initializer, saltNonce], _objectSpread({}, options));\n\n              case 6:\n                options.gasLimit = _context3.sent;\n\n              case 7:\n                proxyAddress = this.contract.createProxyWithNonce(safeMasterCopyAddress, initializer, saltNonce, options).then( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(txResponse) {\n                    var _a, txReceipt, proxyCreationEvent, proxyAddress;\n\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (callback) {\n                              callback(txResponse.hash);\n                            }\n\n                            _context2.next = 3;\n                            return txResponse.wait();\n\n                          case 3:\n                            txReceipt = _context2.sent;\n                            proxyCreationEvent = (_a = txReceipt === null || txReceipt === void 0 ? void 0 : txReceipt.events) === null || _a === void 0 ? void 0 : _a.find(function (_ref3) {\n                              var event = _ref3.event;\n                              return event === 'ProxyCreation';\n                            });\n\n                            if (!(!proxyCreationEvent || !proxyCreationEvent.args)) {\n                              _context2.next = 7;\n                              break;\n                            }\n\n                            throw new Error('SafeProxy was not deployed correctly');\n\n                          case 7:\n                            proxyAddress = proxyCreationEvent.args[0];\n                            return _context2.abrupt(\"return\", proxyAddress);\n\n                          case 9:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                return _context3.abrupt(\"return\", proxyAddress);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function createProxy(_x) {\n        return _createProxy.apply(this, arguments);\n      }\n\n      return createProxy;\n    }()\n  }, {\n    key: \"encode\",\n    value: function encode(methodName, params) {\n      return this.contract.interface.encodeFunctionData(methodName, params);\n    }\n  }, {\n    key: \"estimateGas\",\n    value: function () {\n      var _estimateGas = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(methodName, params, options) {\n        var _this$contract$estima;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return (_this$contract$estima = this.contract.estimateGas)[methodName].apply(_this$contract$estima, _toConsumableArray(params).concat([options]));\n\n              case 2:\n                return _context4.abrupt(\"return\", _context4.sent.toNumber());\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function estimateGas(_x3, _x4, _x5) {\n        return _estimateGas.apply(this, arguments);\n      }\n\n      return estimateGas;\n    }()\n  }]);\n\n  return GnosisSafeProxyFactoryEthersContract;\n}();\n\nexports.default = GnosisSafeProxyFactoryEthersContract;","map":{"version":3,"sources":["../../../../src/contracts/GnosisSafeProxyFactory/GnosisSafeProxyFactoryEthersContract.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst bignumber_1 = require(\"@ethersproject/bignumber\");\nclass GnosisSafeProxyFactoryEthersContract {\n    constructor(contract) {\n        this.contract = contract;\n    }\n    getAddress() {\n        return this.contract.address;\n    }\n    async proxyCreationCode() {\n        return this.contract.proxyCreationCode();\n    }\n    async createProxy({ safeMasterCopyAddress, initializer, saltNonce, options, callback }) {\n        if (bignumber_1.BigNumber.from(saltNonce).lt(0))\n            throw new Error('saltNonce must be greater than or equal to 0');\n        if (options && !options.gasLimit) {\n            options.gasLimit = await this.estimateGas('createProxyWithNonce', [safeMasterCopyAddress, initializer, saltNonce], {\n                ...options\n            });\n        }\n        const proxyAddress = this.contract\n            .createProxyWithNonce(safeMasterCopyAddress, initializer, saltNonce, options)\n            .then(async (txResponse) => {\n            var _a;\n            if (callback) {\n                callback(txResponse.hash);\n            }\n            const txReceipt = await txResponse.wait();\n            const proxyCreationEvent = (_a = txReceipt === null || txReceipt === void 0 ? void 0 : txReceipt.events) === null || _a === void 0 ? void 0 : _a.find(({ event }) => event === 'ProxyCreation');\n            if (!proxyCreationEvent || !proxyCreationEvent.args) {\n                throw new Error('SafeProxy was not deployed correctly');\n            }\n            const proxyAddress = proxyCreationEvent.args[0];\n            return proxyAddress;\n        });\n        return proxyAddress;\n    }\n    encode(methodName, params) {\n        return this.contract.interface.encodeFunctionData(methodName, params);\n    }\n    async estimateGas(methodName, params, options) {\n        return (await this.contract.estimateGas[methodName](...params, options)).toNumber();\n    }\n}\nexports.default = GnosisSafeProxyFactoryEthersContract;\n//# sourceMappingURL=GnosisSafeProxyFactoryEthersContract.js.map"]},"metadata":{},"sourceType":"script"}